jQuery(document).ready(function($){$(".edd-ecourse-tip").tooltip({content:function(){return $(this).prop("title")},tooltipClass:"edd-ecourse-tooltip",position:{my:"center top",at:"center bottom+10",collision:"flipfit"},hide:false,show:false});var EDD_ECourse={init:function(){this.add();this.remove()},add:function(){$("#edd-ecourse-add").on("submit","form",function(e){e.preventDefault();var form=$(this);form.append('<span class="spinner is-active"></span>');form.find("button").attr("disabled",true);var data={action:"edd_ecourse_add_course",course_name:$("#edd-ecourse-name-new").val(),nonce:$("#edd_ecourse_add_course_nonce").val()};$.ajax({type:"POST",url:ajaxurl,data:data,dataType:"json",success:function(response){if(true===response.success){form.find(".spinner").remove();form.find("button").attr("disabled",false);$("#edd-ecourse-name-new").val("");var courseTemplate=wp.template("edd-ecourse-new");$("#edd-ecourse-grid").prepend(courseTemplate(response.data))}else{if(window.console&&window.console.log){console.log(response)}}}}).fail(function(response){if(window.console&&window.console.log){console.log(response)}})})},remove:function(){$(document.body).on("click",".edd-ecourse-action-delete",function(e){e.preventDefault();if(!confirm(edd_ecourse_vars.l10n.confirm_delete_course)){return false}var courseWrap=$(this).parents(".edd-ecourse");var actionsWrap=$(this).parents(".edd-ecourse-actions");actionsWrap.append('<span class="spinner is-active"></span>');actionsWrap.find(".button").each(function(){$(this).addClass("disabled").attr("disabled",true)});var course_id=courseWrap.data("course-id");var data={action:"edd_ecourse_delete_course",course_id:course_id,nonce:$(this).data("nonce")};$.ajax({type:"POST",url:ajaxurl,data:data,dataType:"json",success:function(response){if(true===response.success){courseWrap.remove()}else{if(window.console&&window.console.log){console.log(response)}}}}).fail(function(response){if(window.console&&window.console.log){console.log(response)}})})}};EDD_ECourse.init()});